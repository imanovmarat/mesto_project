{"version":3,"sources":["components/Login.js","components/Register.js","images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/InfoTooltip.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/api.js","components/ProtectedRoute.js","utils/MestoAuth.js","components/App.js","serviceWorker.js","index.js"],"names":["Login","onLoginUser","React","useState","email","setEmail","password","setPassword","className","id","onSubmit","e","preventDefault","type","name","placeholder","onChange","target","value","form","Register","onRegisterUser","required","to","Header","loggedIn","onClickSignOut","src","logoPath","alt","exact","path","onClick","CurrentUserContext","createContext","Card","data","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardAddActiveLikeClassName","link","length","Main","onEditAvatar","onEditProfile","onAddPlace","onCardClick","cards","avatar","about","map","card","key","Footer","InfoTooltip","onClose","isOpen","status","PopupWithForm","children","formName","buttonName","evt","currentTarget","noValidate","EditProfilePopup","onUpdateUser","setName","description","setDescription","useEffect","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","setLink","ImagePopup","api","baseUrl","headers","this","_baseUrl","_headers","token","fetch","method","body","JSON","stringify","then","res","ok","json","Promise","reject","cardId","all","getUserInfo","getInitialCards","process","ProtectedRoute","Component","component","props","BASE_URL","App","setLoggedIn","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","isInfoTooltipSuccess","setIsInfoTooltipSuccess","undefined","selectedCard","setSelectedCard","setCurrentUser","setCards","userEmail","setUserEmail","history","useHistory","getInitialData","catch","console","log","handleInfoTooltip","closeAllPopups","localStorage","getItem","MestoAuth","push","handleEscClose","document","addEventListener","removeEventListener","Provider","removeItem","setItem","err","_","changeLikeCardStatus","newCard","newCards","c","removeCard","filter","setUserInfo","upgradeAvatar","addNewCard","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.4b793e86.chunk.js","sourcesContent":["import React from \"react\";\n\nexport function Login ({ onLoginUser}) {\n\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onLoginUser({email, password})\n  }\n\n  return (\n    <section className=\"content__container\">\n      <form className=\"content__form\" id=\"login\" onSubmit={handleSubmit}>\n        <h1 className=\"content__title\">Вход</h1>\n        <input className=\"content__input\" type=\"email\" name=\"email\" placeholder=\"Email\" onChange={handleChangeEmail} value={email}/>\n        <input className=\"content__input\" type=\"password\" name=\"password\" placeholder=\"Пароль\" onChange={handleChangePassword} value={password} />\n      </form>\n        <button className=\"content__submit-button\" type=\"submit\" form=\"login\">Войти</button>\n    </section>\n  );\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport function Register ({ onRegisterUser }) {\n\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onRegisterUser({email, password})\n  }\n\n  return (\n    <section className=\"content__container\">\n      <form className=\"content__form\" id=\"register\" onSubmit={handleSubmit}>\n        <h1 className=\"content__title\">Регистрация</h1>\n        <input className=\"content__input\" type=\"email\" placeholder=\"Email\" onChange={handleChangeEmail} value={email} required/>\n        <input className=\"content__input\" type=\"password\" placeholder=\"Пароль\" onChange={handleChangePassword} value={password} required/>\n      </form>\n      <div className=\"content__buttons-wrapper\">\n        <button className=\"content__submit-button\" type=\"submit\" form=\"register\">Зарегистрироваться</button>\n        <Link to={'/login'} className=\"content__login-button\">Уже зарегистрированы? Войти</Link>\n      </div>\n    </section>\n  );\n}","export default __webpack_public_path__ + \"static/media/logo.2e17206c.svg\";","import React from \"react\";\nimport logoPath from '../images/logo.svg';\nimport { Link, Route } from \"react-router-dom\";\n\nfunction Header({ loggedIn, email, onClickSignOut }) {\n\n  return(\n    <header className=\"header\">\n      <div className=\"header__container\">\n        <Link to=\"/\" className=\"header__link\">\n          <img src={logoPath} alt=\"Логотип проекта места России\" className=\"header__logo\" />\n        </Link>\n        <Route exact path=\"/\">\n          {loggedIn &&\n          <div>\n            <span className=\"header__email\">{email}</span>\n            <Link to=\"/login\" onClick={onClickSignOut} className=\"header__login header__login_color_gray\">Выйти</Link>\n          </div>\n          }\n        </Route>\n        <Route path=\"/login\">\n          <Link to=\"/register\" className=\"header__login\">Регистрация</Link>\n        </Route>\n        <Route path=\"/register\">\n          <Link to=\"/login\" className=\"header__login\">Войти</Link>\n        </Route>\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card({data, onClick, onCardLike, onCardDelete}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = data.owner === currentUser._id;\n\n  const isLiked = data.likes.some(i => i === currentUser._id);\n\n  const cardAddActiveLikeClassName = (`place__like ${isLiked && \"place__like_active\"}`);\n\n  function handleLikeClick() {\n    onCardLike(data);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(data);\n  }\n\n  return (\n        <figure className=\"place\">\n          {isOwn && <button className=\"place__remove\" onClick={handleDeleteClick}/>}\n          <img src={data.link} alt={data.name} className=\"place__image\" onClick={()=>{onClick(data)}}/>\n          <figcaption className=\"place__container\">\n            <h2 className=\"place__title\">{data.name}</h2>\n            <div className=\"place__like-container\">\n              <button className={cardAddActiveLikeClassName} onClick={handleLikeClick} type=\"button\" />\n              <span className=\"place__like-counter\">{data.likes.length}</span>\n            </div>\n          </figcaption>\n        </figure>\n  )\n}\n\nexport default Card;","import React from \"react\";\nimport Card from \"../components/Card.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\n\nfunction Main({onEditAvatar, onEditProfile, onAddPlace, onCardClick, cards, onCardLike, onCardDelete}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return(\n      <>\n        <section className=\"profile\">\n          <div onClick={onEditAvatar} className=\"profile__avatar-container\">\n            <img src={currentUser.avatar} alt={currentUser.name} className=\"profile__avatar\" />\n            <div className=\"profile__upgrade-avatar-icon\"/>\n          </div>\n          <div className=\"profile__name-container\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <button className=\"profile__button profile__button_type_edit\" onClick={onEditProfile} type=\"button\"/>\n          </div>\n          <p className=\"profile__position\">{currentUser.about}</p>\n          <button className=\"profile__button profile__button_type_add\" onClick={onAddPlace} type=\"button\"/>\n        </section>\n\n        <section className=\"places\">\n          {cards.map((card)=>(\n            <Card data={card} key={card._id} onClick={onCardClick} onCardLike={onCardLike} onCardDelete={onCardDelete} />\n          ))}\n        </section>\n      </>\n  );\n}\n\nexport default Main;","import React from \"react\";\n\nfunction Footer() {\n  return(\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">\n        &copy; 2020 Mesto Russia\n      </p>\n    </footer>\n  );\n}\n\nexport default Footer;","import React from \"react\";\n\nexport function InfoTooltip ({ onClose, isOpen, status }) {\n  return (\n    <section className={`popup ${isOpen && 'popup_opened'}`}>\n      <div className=\"popup__container popup__container_size_small\">\n        <button className=\"popup__button popup__button_type_close\" onClick={onClose} type=\"button\"/>\n        { status\n          ? <><div className=\"popup__icon popup__icon_type_success\" /><p className=\"popup__message\">Вы успешно зарегистрировались!</p></>\n          : <><div className=\"popup__icon popup__icon_type_fail\" /><p className=\"popup__message\">Что-то пошло не так!\n            Попробуйте ещё раз.</p></> }\n      </div>\n    </section>\n  );\n}\n","import React from \"react\";\n\nfunction PopupWithForm({children, formName, buttonName, isOpen, onClose, onSubmit}) {\n\n  function handleOutsideClickClose(evt) {\n    if (evt.target === evt.currentTarget) {\n      onClose();\n    }\n  }\n\n  return(\n    <section className={`popup popup_type_${formName} ${isOpen && 'popup_opened'}`} onClick={handleOutsideClickClose}>\n      <form className=\"popup__container popup__container_size_small\" name={formName} onSubmit={onSubmit} noValidate>\n        <button className=\"popup__button popup__button_type_close\" onClick={onClose} type=\"button\" />\n        {children}\n        <button className=\"popup__button popup__button_type_submit\" type=\"submit\">{buttonName}</button>\n      </form>\n    </section>\n  );\n}\n\nexport default PopupWithForm;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleChangeName (e) {\n    setName(e.target.value)\n  }\n\n  function handleChangeDescription (e) {\n    setDescription(e.target.value)\n  }\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm formName=\"edit-profile\" buttonName=\"Сохранить\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n      <fieldset className=\"popup__box\">\n        <legend className=\"popup__heading\">Редактировать профиль</legend>\n        <label className=\"popup__field\">\n          <input className=\"popup__input popup__input_field_first\" onChange={handleChangeName} value={name || ''} type=\"text\" id=\"name-input\" name=\"name-input\"\n                 minLength=\"2\" maxLength=\"40\" required />\n          <span className='popup__input-error' id='name-input-error'/>\n        </label>\n        <label className=\"popup__field\">\n          <input className=\"popup__input popup__input_field_second\" onChange={handleChangeDescription} value={description || ''} type=\"text\" id=\"position-input\"\n                 name=\"position-input\" minLength=\"2\" maxLength=\"200\" required />\n          <span className='popup__input-error' id='position-input-error'/>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\n\n  const avatarRef = React.useRef();\n\n  React.useEffect(() => {\n    avatarRef.current.value = '';\n  },[isOpen]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateAvatar({\n      avatar: avatarRef.current.value\n    });\n  }\n\n  return (\n    <PopupWithForm formName=\"update-avatar\" buttonName=\"Сохранить\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n      <fieldset className=\"popup__box\">\n        <legend className=\"popup__heading\">Обновить аватар</legend>\n        <label className=\"popup__field\">\n          <input className=\"popup__input popup__input_field_second\" ref={avatarRef} type=\"url\" id=\"update-avatar-input\"\n                 name=\"update-avatar-input\" placeholder=\"Ссылка на картинку\" required />\n          <span className='popup__input-error' id='update-avatar-input-error'/>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\n\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  React.useEffect(() => {\n    setName('');\n    setLink('');\n  },[isOpen]);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeLink(e) {\n    setLink(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onAddPlace({\n      name: name,\n      link: link\n    });\n  }\n\n  return (\n    <PopupWithForm formName=\"add-card\" buttonName=\"Создать\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n      <fieldset className=\"popup__box\">\n        <legend className=\"popup__heading\">Новое место</legend>\n        <label className=\"popup__field\">\n          <input className=\"popup__input popup__input_field_first\" type=\"text\" id=\"card-name-input\" value={name}\n                 onChange={handleChangeName} name=\"card-name-input\" placeholder=\"Название\" minLength=\"1\" maxLength=\"30\" required />\n\n          <span className='popup__input-error' id='card-name-input-error'/>\n        </label>\n        <label className=\"popup__field\">\n          <input className=\"popup__input popup__input_field_second\" type=\"url\" id=\"card-image-input\" value={link}\n                 onChange={handleChangeLink} name=\"card-image-input\" placeholder=\"Ссылка на картинку\" required />\n          <span className='popup__input-error' id='card-image-input-error'/>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;","import React from \"react\";\nfunction ImagePopup({card, onClose}) {\n\n  function handleOutsideClickClose(evt) {\n    if (evt.target === evt.currentTarget) {\n      onClose();\n    }\n  }\n\n  return(\n    <section className={`popup popup_type_full-img ${card && 'popup_opened'}`} onClick={handleOutsideClickClose}>\n      <figure className=\"popup__container popup__container_size_large\">\n        <button className=\"popup__button popup__button_type_close\" onClick={onClose} type=\"button\"/>\n        <img src={card && card.link} alt={card && card.name} className=\"popup__image\" />\n        <figcaption className=\"popup__image-caption\">{card && card.name}</figcaption>\n      </figure>\n    </section>\n  );\n}\n\nexport default ImagePopup;","const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:3000';\n\nclass Api {\n  constructor({baseUrl, headers}) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n\n  }\n\n  upgradeAvatar({ avatar }, { token }){\n  return fetch(`${this._baseUrl}/users/me/avatar`, {\n    method: 'PATCH',\n    headers: {\n      ...this._headers,\n      'authorization': `Bearer ${ token }`\n    },\n    body: JSON.stringify({\n      avatar: avatar\n    })\n  })\n  .then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject('Ошибка запроса upgradeAvatar');\n  });\n}\n\n  changeLikeCardStatus(cardId, isLiked, { token }) {\n    if (isLiked) {\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: 'DELETE',\n        headers: {\n          ...this._headers,\n          'authorization': `Bearer ${ token }`\n        }\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject('Ошибка запроса changeLikeCardStatus');\n      });\n\n    } else {\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: 'PUT',\n        headers: {\n          ...this._headers,\n          'authorization': `Bearer ${ token }`\n        }\n      })\n        .then(res => {\n          if (res.ok) {\n            return res.json();\n          }\n          return Promise.reject('Ошибка запроса changeLikeCardStatus');\n        });\n    }\n\n  }\n\n  removeCard(cardId,{token}) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        ...this._headers,\n        'authorization': `Bearer ${ token }`\n      }\n    })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject('Ошибка запроса removeCard');\n      });\n  }\n\n  addNewCard({name, link}, { token }) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        ...this._headers,\n        'authorization': `Bearer ${ token }`\n      },\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject('Ошибка запроса addNewCard');\n      });\n  }\n\n  setUserInfo({name, about}, { token }) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        ...this._headers,\n        'authorization': `Bearer ${ token }`\n      },\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject('Ошибка запроса setUserInfo');\n      });\n  }\n\n  getAppInfo({ token }) {\n    return Promise.all([this.getUserInfo({ token }), this.getInitialCards({ token })]);\n  }\n\n\n  getInitialCards({ token }) {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: {\n        ...this._headers,\n        'authorization': `Bearer ${ token }`\n      }\n    })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject('Ошибка запроса getInitialCards');\n      });\n  }\n\n  getUserInfo({ token }) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        ...this._headers,\n        'authorization': `Bearer ${ token }`\n      }\n    })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject('Ошибка запроса getUserInfo');\n      });\n  }\n\n}\n\nconst api = new Api({\n  baseUrl: apiUrl,\n  headers: {\n    // 'Authorization' : `Bearer ${localStorage.getItem('token')}`,\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport const ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/login\" />\n      }\n    </Route>\n  )\n}","const BASE_URL =  process.env.REACT_APP_API_URL || 'http://localhost:3000';\n\nexport const singUp = ({ email, password }) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      'email': email,\n      'password': password\n    })\n  })\n    .then((res) => {\n      if(res.ok){\n        return res.json();\n      }\n      return Promise.reject('Ошибка запроса на регистрацию ');\n    })\n    .then((res) => res);\n}\n\nexport const singIn = ({ email, password }) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      'email': email,\n      'password': password\n    })\n  })\n    .then((res) => {\n      if(res.ok){\n        return res.json();\n      }\n      return Promise.reject('Ошибка запроса на аутентификацию ');\n    })\n    .then((res) => res);\n}\n\nexport const tokenCheck = ({ token }) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\" : `Bearer ${token}`\n    }\n  })\n    .then((res) => {\n      if(res.ok){\n        return res.json();\n      }\n      return Promise.reject('Ошибка запроса с токеном ');\n    })\n    .then((res) => res);\n}","import React from 'react';\nimport {Route, Switch, useHistory} from 'react-router-dom';\nimport { Login } from './Login';\nimport { Register } from './Register';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from \"./Footer\";\nimport { InfoTooltip } from \"./InfoTooltip\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport api from \"../utils/api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { ProtectedRoute } from \"./ProtectedRoute\";\nimport * as MestoAuth from \"../utils/MestoAuth\";\n\nfunction App() {\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [isInfoTooltipSuccess, setIsInfoTooltipSuccess] = React.useState(true);\n\n  const [selectedCard, setSelectedCard] = React.useState(undefined);\n\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  const [cards, setCards] = React.useState([]);\n\n  const [userEmail, setUserEmail] = React.useState('');\n\n  const history = useHistory();\n\n  function onSignOut(){\n    localStorage.removeItem('token');\n    setLoggedIn(false);\n    setCards([]);\n    setCurrentUser({});\n\n  }\n\n  React.useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      MestoAuth.tokenCheck({ token })\n        .then((res) => {\n          setUserEmail(res.email);\n          setLoggedIn(true);\n          getInitialData({token})\n          history.push('/');\n        })\n    }\n  },[]);\n\n  function onRegister ({ email, password }) {\n    MestoAuth.singUp({ email, password })\n      .then((_) => {\n        setIsInfoTooltipSuccess(true);\n        handleInfoTooltip();\n        history.push('/login');\n      })\n      .catch((err) => {\n        setIsInfoTooltipSuccess(false);\n        handleInfoTooltip();\n      });\n  }\n\n\n  function onLogin ({ email, password }) {\n    MestoAuth.singIn({ email, password })\n      .then((data) => {\n        localStorage.setItem('token', data.token);\n        setUserEmail(email);\n        setLoggedIn(true);\n        getInitialData(data)\n        history.push('/');\n      })\n      .catch((err) => console.log(err));\n\n  }\n\n  // Закрытие попапов при нажатии Esc\n\n  React.useEffect(() => {\n    function handleEscClose(evt) {\n      if (evt.key === 'Escape') {\n        closeAllPopups();\n      }\n    }\n\n    document.addEventListener('keydown', handleEscClose);\n\n    return () => document.removeEventListener('keydown', handleEscClose);\n\n  },[])\n\n// Получение начальных карточек и информации о пользователе\n  function getInitialData ({ token }) {\n    api.getInitialCards({ token })\n      .then(res => {\n        setCards(res);\n      })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n    api.getUserInfo({ token }).then( res => {\n      setCurrentUser(res);\n    })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n  }\n\n/*  React.useEffect(() => {\n    const token = localStorage.getItem('token');\n    api.getInitialCards({ token })\n      .then(res => {\n        setCards(res);\n      })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n  },[loggedIn]);\n\n  React.useEffect(() => {\n    const token = localStorage.getItem('token');\n    api.getUserInfo({ token }).then( res => {\n      setCurrentUser(res);\n    })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n  },[loggedIn]);*/\n\n  function handleAddPlaceSubmit(newCard) {\n    const token = localStorage.getItem('token');\n    api.addNewCard(newCard, {token})\n      .then(res => {\n        setCards([res, ...cards]);\n        closeAllPopups();\n      })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n  }\n\n  function handleCardLike(card) {\n    const token = localStorage.getItem('token');\n    const isLiked = card.likes.some(i => i === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, isLiked, {token})\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n  }\n\n  function handleCardDelete(card) {\n    const token = localStorage.getItem('token');\n    api.removeCard(card._id, { token })\n      .then(_ => {\n        const newCards = cards.filter((c) => c._id === card._id ? false : c);\n        setCards(newCards);\n      })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleInfoTooltip() {\n    setIsInfoTooltipOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n\n    setSelectedCard(undefined);\n  }\n\n  function handleUpdateUser(data) {\n    const token = localStorage.getItem('token');\n    api.setUserInfo(data, { token })\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n  }\n\n  function handleUpdateAvatar(data) {\n    const token = localStorage.getItem('token');\n    api.upgradeAvatar(data, { token })\n      .then(res => {\n        setCurrentUser(res);\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(res => console.log(`Возникла ошибка: ${res}`));\n  }\n\n  return (\n        <CurrentUserContext.Provider value={currentUser}>\n          <div className=\"page\">\n            <div className=\"page__container\">\n              <Header loggedIn={loggedIn} email={userEmail} onClickSignOut={onSignOut} />\n              <main className=\"content\">\n                <Switch>\n                  <Route path=\"/login\">\n                    <Login onLoginUser={onLogin} />\n                  </Route>\n                  <Route path=\"/register\">\n                    <Register onRegisterUser={onRegister}/>\n                  </Route>\n                  <ProtectedRoute path=\"/\" loggedIn={loggedIn} component={Main}\n                                  onEditAvatar={handleEditAvatarClick}\n                                  onEditProfile={handleEditProfileClick}\n                                  onAddPlace={handleAddPlaceClick}\n                                  onCardClick={handleCardClick}\n                                  cards={cards}\n                                  onCardLike={handleCardLike}\n                                  onCardDelete={handleCardDelete} />\n                </Switch>\n              </main>\n              { loggedIn && <Footer /> }\n\n              <InfoTooltip status={isInfoTooltipSuccess} isOpen={isInfoTooltipOpen} onClose={closeAllPopups} />\n\n              <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n\n              <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n\n              <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n\n              <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n\n              <PopupWithForm formName=\"confirm\" buttonName=\"Да\" onClose={closeAllPopups}>\n                <div className=\"popup__heading\">Вы уверены?</div>\n              </PopupWithForm>\n            </div>\n          </div>\n        </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}